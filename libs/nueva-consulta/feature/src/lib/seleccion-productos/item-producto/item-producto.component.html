<mat-card [ngClass]="!producto.disponibleEnInventario ? 'ko-unavailable-product' : producto.selected && highlight ? 'mat-elevation-z4 ko-highlighted-product' : producto.selected && !highlight ? 'mat-elevation-z4' : !producto.selected && highlight ? 'ko-highlighted-product' : 'mat-elevation-z1'">
    <div class="ko-item-producto__parent">
        <div *ngIf="!activarRecomendaciones" style="margin-right: 16px;">
            <mat-checkbox (change)="onCheckboxChange($event.checked)" color="primary"></mat-checkbox>
        </div>
        <div>
            <div class="ko-item-producto__header">
                <p style="margin: 0px;">
                    {{producto.producto.funcion.nombre}}
                </p>
                <h3 style="margin: 0px;">{{ producto.producto.nombre }} - {{ producto.producto.laboratorio.nombre }}</h3>
            </div>        

            <div *ngIf="activarRecomendaciones && producto.disponibleEnInventario">
                <mat-form-field>
                    <mat-label>Usar para...</mat-label>
                    <mat-select [formControl]="tratamientosControl" multiple>
                  
                      <mat-select-trigger>
                        <mat-chip-list>
                          <mat-chip *ngFor="let tratamiento of producto.tratamientos"
                            [removable]="true" (removed)="onTratamientoRemoved(tratamiento)">
                            {{ tratamiento.nombre }}
                            <mat-icon matChipRemove>cancel</mat-icon>
                          </mat-chip>
                        </mat-chip-list>
                      </mat-select-trigger>
                  
                      <mat-option #option *ngFor="let tratamiento of opcionesTratamientos" [value]="tratamiento" (onSelectionChange)="onTratamientoSelectionChanged(tratamiento, option.selected)">{{tratamiento.nombre}}</mat-option>
                  
                    </mat-select>
                  </mat-form-field>
            </div>

            <div *ngIf="!producto.disponibleEnInventario" class="ko-unavailable-msg">
                <mat-icon>do_not_disturb</mat-icon>
                <span> No disponible en inventario</span>
            </div>
            
        </div>
    </div>
</mat-card>
